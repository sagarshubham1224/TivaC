/*
 * MPR121.h
 *
 *  Created on: 04-Jun-2018
 *      Author: sagar
 */

#ifndef MPR121_H_
#define MPR121_H_


#include "stdint.h"
#include "stdbool.h"
#include "ss_GPIO.h"
#include "ss_TIME.h"
#include "ss_I2C.h"
#include "ss_UART.h"





#define MPR121_TOUCH_STATUS_REGISTER_00							0x00
#define MPR121_TOUCH_STATUS_REGISTER_01							0x01

#define MPR121_ELE0_DATA_LSB_REGISTER							0x04
#define MPR121_ELE0_DATA_MSB_REGISTER							0x05
#define MPR121_ELE1_DATA_LSB_REGISTER							0x06
#define MPR121_ELE1_DATA_MSB_REGISTER							0x07
#define MPR121_ELE2_DATA_LSB_REGISTER							0x08
#define MPR121_ELE2_DATA_MSB_REGISTER							0x09
#define MPR121_ELE3_DATA_LSB_REGISTER							0x0A
#define MPR121_ELE3_DATA_MSB_REGISTER							0x0B
#define MPR121_ELE4_DATA_LSB_REGISTER							0x0C
#define MPR121_ELE4_DATA_MSB_REGISTER							0x0D
#define MPR121_ELE5_DATA_LSB_REGISTER							0x0E
#define MPR121_ELE5_DATA_MSB_REGISTER							0x0F
#define MPR121_ELE6_DATA_LSB_REGISTER							0x10
#define MPR121_ELE6_DATA_MSB_REGISTER							0x11
#define MPR121_ELE7_DATA_LSB_REGISTER							0x12
#define MPR121_ELE7_DATA_MSB_REGISTER							0x13
#define MPR121_ELE8_DATA_LSB_REGISTER							0x14
#define MPR121_ELE8_DATA_MSB_REGISTER							0x15
#define MPR121_ELE9_DATA_LSB_REGISTER							0x16
#define MPR121_ELE9_DATA_MSB_REGISTER							0x17
#define MPR121_ELE10_DATA_LSB_REGISTER							0x18
#define MPR121_ELE10_DATA_MSB_REGISTER							0x19
#define MPR121_ELE11_DATA_LSB_REGISTER							0x1A
#define MPR121_ELE11_DATA_MSB_REGISTER							0x1B
#define MPR121_ELEPROX_DATA_LSB_REGISTER						0x1C
#define MPR121_ELEPROX_DATA_MSB_REGISTER						0x1D



#define MPR121_ELE0_BASELINE_REGISTER							0x1E
#define MPR121_ELE1_BASELINE_REGISTER							0x1F
#define MPR121_ELE2_BASELINE_REGISTER							0x20
#define MPR121_ELE3_BASELINE_REGISTER							0x21
#define MPR121_ELE4_BASELINE_REGISTER							0x22
#define MPR121_ELE5_BASELINE_REGISTER							0x23
#define MPR121_ELE6_BASELINE_REGISTER							0x24
#define MPR121_ELE7_BASELINE_REGISTER							0x25
#define MPR121_ELE8_BASELINE_REGISTER							0x26
#define MPR121_ELE9_BASELINE_REGISTER							0x27
#define MPR121_ELE10_BASELINE_REGISTER							0x28
#define MPR121_ELE11_BASELINE_REGISTER							0x29
#define MPR121_ELEPROX_BASELINE_REGISTER						0x2A

#define MPR121_MHD_RISING_REGISTER								0x2B
#define MPR121_NHD_RISING_REGISTER								0x2C
#define MPR121_NCL_RISING_REGISTER								0x2D
#define MPR121_FDL_RISING_REGISTER								0x2E
#define MPR121_MHD_FALLING_REGISTER								0x2F
#define MPR121_NHD_FALLING_REGISTER								0x30
#define MPR121_NCL_FALLING_REGISTER								0x31
#define MPR121_FDL_FALLING_REGISTER								0x32
#define MPR121_NHD_TOUCHED_REGISTER								0x33
#define MPR121_NCL_TOUCHED_REGISTER								0x34
#define MPR121_FDL_TOUCHED_REGISTER								0x35
#define MPR121_ELEPROX_MHD_RISING_REGISTER						0x36
#define MPR121_ELEPROX_NHD_RISING_REGISTER						0x37
#define MPR121_ELEPROX_NCL_RISING_REGISTER						0x38
#define MPR121_ELEPROX_FDL_RISING_REGISTER						0x39
#define MPR121_ELEPROX_MHD_FALLING_REGISTER						0x3A
#define MPR121_ELEPROX_NHD_FALLING_REGISTER						0x3B
#define MPR121_ELEPROX_NCL_FALLING_REGISTER						0x3C
#define MPR121_ELEPROX_FDL_FALLING_REGISTER						0x3D
#define MPR121_ELEPROX_NHD_TOUCHED_REGISTER						0x3E
#define MPR121_ELEPROX_NCL_TOUCHED_REGISTER						0x3F
#define MPR121_ELEPROX_FDL_TOUCHED_REGISTER						0x40



#define MPR121_ELE0_TOUCH_THRESHOLD_REGISTER					0x41
#define MPR121_ELE0_RELEASE_THRESHOLD_REGISTER					0x42
#define MPR121_ELE1_TOUCH_THRESHOLD_REGISTER					0x43
#define MPR121_ELE1_RELEASE_THRESHOLD_REGISTER					0x44
#define MPR121_ELE2_TOUCH_THRESHOLD_REGISTER					0x45
#define MPR121_ELE2_RELEASE_THRESHOLD_REGISTER					0x46
#define MPR121_ELE3_TOUCH_THRESHOLD_REGISTER					0x47
#define MPR121_ELE3_RELEASE_THRESHOLD_REGISTER					0x48
#define MPR121_ELE4_TOUCH_THRESHOLD_REGISTER					0x49
#define MPR121_ELE4_RELEASE_THRESHOLD_REGISTER					0x4A
#define MPR121_ELE5_TOUCH_THRESHOLD_REGISTER					0x4B
#define MPR121_ELE5_RELEASE_THRESHOLD_REGISTER					0x4C
#define MPR121_ELE6_TOUCH_THRESHOLD_REGISTER					0x4D
#define MPR121_ELE6_RELEASE_THRESHOLD_REGISTER					0x4E
#define MPR121_ELE7_TOUCH_THRESHOLD_REGISTER					0x4F
#define MPR121_ELE7_RELEASE_THRESHOLD_REGISTER					0x50
#define MPR121_ELE8_TOUCH_THRESHOLD_REGISTER					0x51
#define MPR121_ELE8_RELEASE_THRESHOLD_REGISTER					0x52
#define MPR121_ELE9_TOUCH_THRESHOLD_REGISTER					0x53
#define MPR121_ELE9_RELEASE_THRESHOLD_REGISTER					0x54
#define MPR121_ELE10_TOUCH_THRESHOLD_REGISTER					0x55
#define MPR121_ELE10_RELEASE_THRESHOLD_REGISTER					0x56
#define MPR121_ELE11_TOUCH_THRESHOLD_REGISTER					0x57
#define MPR121_ELE11_RELEASE_THRESHOLD_REGISTER					0x58
#define MPR121_ELEPROX_TOUCH_THRESHOLD_REGISTER					0x59
#define MPR121_ELEPROX_RELEASE_THRESHOLD_REGISTER				0x5A

#define MPR121_DEBOUNCE_TOUCH_AND_RELEASE_REGISTER				0x5B

#define MPR121_AFE_CONFIGURATION_1_REGISTER						0x5C
#define MPR121_AFE_CONFIGURATION_2_REGISTER						0x5D
#define MPR121_ELECTRODE_CONFIGURATION_REGISTER					0x5E

#define MPR121_ELE0_ELECTRODE_CURRENT_REGISTER					0x5F
#define MPR121_ELE1_ELECTRODE_CURRENT_REGISTER					0x60
#define MPR121_ELE2_ELECTRODE_CURRENT_REGISTER					0x61
#define MPR121_ELE3_ELECTRODE_CURRENT_REGISTER					0x62
#define MPR121_ELE4_ELECTRODE_CURRENT_REGISTER					0x63
#define MPR121_ELE5_ELECTRODE_CURRENT_REGISTER					0x64
#define MPR121_ELE6_ELECTRODE_CURRENT_REGISTER					0x65
#define MPR121_ELE7_ELECTRODE_CURRENT_REGISTER					0x66
#define MPR121_ELE8_ELECTRODE_CURRENT_REGISTER					0x67
#define MPR121_ELE9_ELECTRODE_CURRENT_REGISTER					0x68
#define MPR121_ELE10_ELECTRODE_CURRENT_REGISTER					0x69
#define MPR121_ELE11_ELECTRODE_CURRENT_REGISTER					0x6A
#define MPR121_ELEPROX_ELECTRODE_CURRENT_REGISTER				0x6B
#define MPR121_ELE0_ELE1_CHARGE_TIME_REGISTER					0x6C
#define MPR121_ELE2_ELE1_CHARGE_TIME_REGISTER					0x6D
#define MPR121_ELE4_ELE1_CHARGE_TIME_REGISTER					0x6E
#define MPR121_ELE6_ELE1_CHARGE_TIME_REGISTER					0x6F
#define MPR121_ELE8_ELE1_CHARGE_TIME_REGISTER					0x70
#define MPR121_ELE10_ELE1_CHARGE_TIME_REGISTER					0x71
#define MPR121_ELEPROX_CHARGE_TIME_REGISTER						0x72

#define MPR121_GPIO_CONTROL_0_REGISTER							0x73
#define MPR121_GPIO_CONTROL_1_REGISTER							0x74
#define MPR121_GPIO_DATA_REGISTER								0x75
#define MPR121_GPIO_DIRECTION_CONTROL_REGISTER					0x76
#define MPR121_GPIO_ENABLE_REGISTER								0x77
#define MPR121_GPIO_DATA_SET_REGISTER							0x78
#define MPR121_GPIO_DATA_CLEAR_REGISTER							0x79
#define MPR121_GPIO_DATA_TOGGLE_REGISTER						0x7A


#define MPR121_AUTO_CONFIG_CONTROL_0_REGISTER					0x7B
#define MPR121_AUTO_CONFIG_CONTROL_1_REGISTER					0x7C
#define MPR121_AUTO_CONFIG_USL_REGISTER							0x7D
#define MPR121_AUTO_CONFIG_LSL_REGISTER							0x7E
#define MPR121_AUTO_CONFIG_TARGET_LEVEL_REGISTER				0x7F

#define MPR121_SOFT_RESET_REGISTER								0x80


#define MPR121_ELEX_TOUCH_THRESHOLD_VALUE							0x1A
#define MPR121_ELEX_RELEASE_THRESHOLD_VALUE							0x09

typedef enum MPR121SENSOR_SLAVE_ADDRESS {
	MPR121_SLAVE_ADDRESS_ADD_VSS =								0x5A,
	MPR121_SLAVE_ADDRESS_ADD_VDD =								0x5B,
	MPR121_SLAVE_ADDRESS_ADD_SDA =								0x5C,
	MPR121_SLAVE_ADDRESS_ADD_SCL =								0x5D

}MPR121SENSOR_SLAVE_ADDRESS ;

typedef enum MPR121SENSOR_FFI_SAMPLES {
	MPR121_FFI_06_SAMPLES =										0b00000000,
	MPR121_FFI_10_SAMPLES =										0b01000000,
	MPR121_FFI_18_SAMPLES =										0b10000000,
	MPR121_FFI_34_SAMPLES =										0b11000000
}MPR121SENSOR_FFI_SAMPLES ;

typedef enum  MPR121SENSOR_CDT {
	MPR121_CDT_0P5_US = 										0b00100000,
	MPR121_CDT_01_US =	 										0b01000000,
	MPR121_CDT_02_US =	 										0b01100000,
	MPR121_CDT_04_US =	 										0b10000000,
	MPR121_CDT_08_US =	 										0b10100000,
	MPR121_CDT_16_US =	 										0b11000000,
	MPR121_CDT_32_US =	 										0b11100000
}MPR121SENSOR_CDT;


typedef enum MPR121SENSOR_SFI_SAMPLES {
	MPR121_SFI_04_SAMPLES =										0b00000000,
	MPR121_SFI_06_SAMPLES =										0b00001000,
	MPR121_SFI_10_SAMPLES =										0b00010000,
	MPR121_SFI_18_SAMPLES =										0b00011000
}MPR121SENSOR_SFI_SAMPLES ;


typedef enum  MPR121SENSOR_ESI {
	MPR121_ESI_1_MS   =	 										0b00000000,
	MPR121_ESI_2_MS   = 										0b00000001,
	MPR121_ESI_4_MS   =	 										0b00000010,
	MPR121_ESI_8_MS   =	 										0b00000011,
	MPR121_ESI_16_MS  =	 										0b00000100,
	MPR121_ESI_32_MS  =	 										0b00000101,
	MPR121_ESI_64_MS  =	 										0b00000110,
	MPR121_ESI_128_MS =	 										0b00000111
}MPR121SENSOR_ESI;



typedef struct MPR121SENSOR
{
	I2CDEVICE MPR121I2CDevice;
	GPIO IRQPin;
	uint8_t touchRegisters[2] ;
	uint16_t touchRegistersStatus ;
	bool touchStatusChanged;
}MPR121SENSOR;




MPR121SENSOR* initialize_MPR121(MPR121SENSOR* MPR121SensorPointer,MPR121SENSOR_SLAVE_ADDRESS I2CSlaveAddress,
		char GPIOPortLetter, uint8_t pinNumber, void (*intHandlerFunction)(void),
		UARTDEVICE* UARTDevicePointer);






















#endif /* MPR121_H_ */
